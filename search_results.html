<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Search Results</title>
    <link
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link href="style.css" rel="stylesheet" />
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <a class="navbar-brand" href="index.html">
        <img src="images/logo.png" alt="Library Logo" class="navbar-logo" />
        e-Shelf
      </a>      
      <button
        class="navbar-toggler"
        type="button"
        data-toggle="collapse"
        data-target="#navbarNav"
        aria-controls="navbarNav"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" href="index.html">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="insert_book.html">Insert Book</a>
          </li>
          <li class="nav-item">
            <a class="nav-link active" href="search_results.php"
              >Search Results</a
            >
          </li>
        </ul>
        <!-- Search Field -->
        <form class="form-inline ml-auto" action="search_results.php" method="get" role="search">
          <input
            class="form-control mr-sm-2"
            type="search"
            name="query"
            placeholder="Search by title"
            aria-label="Search for books"
          />
          <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
        </form>
      </div>
    </nav>

    <div class="container mt-4">
      <h2 class="mb-4 text-center">Search Results</h2>

      <!-- Filtering Form -->
      <form id="filterForm" class="mb-4">
        <div class="form-row">
          <div class="form-group col-md-4">
            <label for="category">Category</label>
            <select id="category" class="form-control">
              <option value="">All</option>
              <option value="Fiction">Fiction</option>
              <option value="Non-fiction">Non-fiction</option>
            </select>
          </div>
          <div class="form-group col-md-4">
            <label for="minYear">Minimum Year of Publication</label>
            <input
              type="number"
              id="minYear"
              class="form-control"
              placeholder="e.g., 1980"
            />
          </div>
          <div class="form-group col-md-4">
            <label for="maxYear">Maximum Year of Publication</label>
            <input
              type="number"
              id="maxYear"
              class="form-control"
              placeholder="e.g., 2000"
            />
          </div>
        </div>
        <button class="btn btn-primary" onclick="filterResults()">
          Filter
      </button>
      
      </form>

      <!-- Results Section -->
      <div id="results">
        <!-- Results will be displayed here -->
      </div>
    </div>

    <footer class="text-center py-3">
      <p>&copy; 2024 Library Project. All rights reserved.</p>
    </footer>

    <script>
      // Sample data (replace with dynamic data source if available)
      const books = [
        { title: "Book One", category: "Fiction", year: 1995 },
        { title: "Book Two", category: "Personal Development", year: 2001 },
        { title: "Book Three", category: "Literacy Fiction", year: 1987 },
        { title: "Book Four", category: "Science Fiction", year: 1999 },
        { title: "Book Five", category: "Non-fiction", year: 2005 },
      ];

      // Function to display books
      function displayBooks(filteredBooks) {
        const resultsDiv = document.getElementById("results");
        resultsDiv.innerHTML = ""; // Clear previous results

        if (filteredBooks.length === 0) {
          resultsDiv.innerHTML = "<p>No books found.</p>";
          return;
        }

        filteredBooks.forEach((book) => {
          const bookDiv = document.createElement("div");
          bookDiv.classList.add("card", "mb-3");
          bookDiv.innerHTML = `
                <div class="card-body">
                    <h5 class="card-title">${book.title}</h5>
                    <p class="card-text">Category: ${book.category}</p>
                    <p class="card-text">Year of Publication: ${book.year}</p>
                </div>
            `;
          resultsDiv.appendChild(bookDiv);
        });
      }

      // Initial display of all books
      displayBooks(books);

      // Filter results based on user input
      function filterResults() {
        const category = document.getElementById("category").value;
        const minYear = parseInt(document.getElementById("minYear").value);
        const maxYear = parseInt(document.getElementById("maxYear").value);

        const filteredBooks = books.filter((book) => {
          return (
            (category === "" || book.category === category) &&
            (isNaN(minYear) || book.year >= minYear) &&
            (isNaN(maxYear) || book.year <= maxYear)
          );
        });

        displayBooks(filteredBooks);
      }
    </script>
  </body>
</html>
